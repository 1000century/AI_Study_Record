## 호름
```
GenerativeWorkflow (SequentialAgent)
│
├─ StoryWriter (LlmAgent)
│   └─ 역할: 사용자가 준 주제로 짧은 이야기 생성
│
├─ SaveCriticInput (LlmAgent)
│   └─ 역할: StoryWriter 출력을 'critic_input' 키로 세션에 저장
│
├─ StoryCritic (LlmAgent)
│   └─ 역할: 이야기를 평가, "승인" 또는 "수정" 결정
│
├─ SaveCriticDecision (LlmAgent)
│   └─ 역할: StoryCritic 출력을 'critic_decision' 키로 세션에 저장
│
└─ Router (ConditionalRouter (BaseAgent))
    └─ 역할:
        ├─ critic_decision == "승인" → 워크플로우 종료 (escalate=True)
        └─ critic_decision != "승인" → 다음 단계로 진행 (escalate=False)
```

## 코드
```python
generative_flow = SequentialAgent(
    name="GenerativeWorkflow",
    sub_agents=[
        story_writer,
        # LlmAgent의 출력을 세션 상태에 저장하여 다음 에이전트가 사용할 수 있도록 합니다.
        LlmAgent(
            name="SaveCriticInput",
            model="gemini-2.0-flash-exp",
            output_key="critic_input",  # story_writer의 출력을 critic_input 키로 저장
            instruction="""다음 에이전트가 사용할 수 있도록 이전 단계의 출력을 저장합니다."""
        ),
        story_critic,
        # story_critic의 출력을 critic_decision 키로 저장
        LlmAgent(
            name="SaveCriticDecision",
            model="gemini-2.0-flash-exp",
            output_key="critic_decision",
            instruction="""다음 에이전트가 사용할 수 있도록 이전 단계의 출력을 저장합니다."""
        ),
        ConditionalRouter(name="Router")
    ]
)
```
- `SaveCriticInput` 과 `SaveCriticDecision`은 다음 단계로 전달하기 위해 저장하는 용도이다.
- 이때, LlmAgent에 `critic_input`이라는 인자를 받는다


## 결과
```
==================================================
에이전트: StoryWriter
==================================================
출력:
태양계 너머로 진출한 지 수 세기가 흘렀고, 인류는 별들 사이에 흔적을 남겼습니다. 라라라는 이름의 숙련된 우주 비행사는 최첨단 우주선인 "성운 호프"의 조종석에 앉아 있었습니다. 그녀의 임무는 이전에 지도에 없던 은하 영역을 탐험하는 것이었습니다.

라라는 그녀의 곁에 있는 홀로그램 네비게이터인 '카이'에게 "카이, 확 인 보고서를 주십시오."라고 말했습니다.

"대장님, 모든 시스템이 정상입니다. 새로운 경로를 향해 출발할 준비가 되었습니다." 카이가 대답했습니다.

라라는 심호흡을 하고 엔진을 점화했습니다. 성운 호프는 우주를 뚫고  나아가며 다채로운 성운을 남겼습니다. 그들이 여행하면서 그들은 경외 감을 불러일으키는 광경을 만났습니다. 춤추는 오로라로 둘러싸인 가스 거인과 이전에는 알려지지 않았던 생명으로 활력이 넘치는 크리스탈 행 성.

어느 날, 그들은 우주에 있는 거대한 구조물인 별 모양의 고물을 발견했습니다. 그것은 마치 별들의 폐선박에서 조각된 것처럼 보였습니다. 카 이가 분석하고 나서 "대장님, 이것은 전설적인 '천상의 쓰레기장'입니다. 우주 전체에서 수집된 버려진 우주선과 기술의 묘지입니다."라고 말했습니다.

호기심이 가득한 라라는 더 자세히 조사하기로 결정했습니다. 그들은 쓰레기장으로 들어가며 거대한 우주선 잔해와 이상한 장치들을 발견했습니다. 그러다가 신호를 감지했습니다. 구조 신호였습니다.

신호를 따라간 라라와 카이는 낡은 우주선에 갇힌 생존자 그룹을 발견했습니다. 그들은 수십 년 전에 사라진 탐험가 그룹의 후손들입니다. 라라는 그들을 성운 호프에 태우고 문명 세계로 돌아가는 경로를 설정했습니다.

귀환하면서 라라는 그녀의 여행의 의미를 생각했습니다. 그것은 단지 새로운 행성과 기술을 발견하는 것만이 아니었습니다. 그것은 연결을 맺고, 길을 잃은 사람들을 집으로 데려오고, 우주의 신비 속에서 인류를 찾 는 것이었습니다.

성운 호프가 지구로 돌아오자 라라는 더 이상 같은 사람이 아니었습니다. 그녀는 우주의 광활한 지역에 대한 경외감을 가지고 있었고, 연결의  중요성에 대한 깊은 이해를 가지고 있었습니다. 그녀의 우주 탐험 이야 기는 별들 사이에서 영원히 울려 퍼질 것입니다.

*** 최종 응답 ***
```

```
==================================================
에이전트: SaveCriticInput
==================================================
출력:
다음과 같습니다:

라라는 사령실로 돌아와 작전 책임자인 이사벨라를 만났습니다. 이사벨 라는 테이블 위에 있는 지도를 가리키며 "라라, 당신의 보고서에 따르면 천상의 쓰레기장에는 미지의 기술이 있을 수 있습니다. 의회는 우리가 회수 작전을 진행하기를 원합니다."라고 말했습니다.

라라는 신중을 기하며 "이사벨라, 구조 신호를 방해하는 것을 주저합니 다. 쓰레기장은 위험할 수 있고, 우리 행동에 대한 그곳 거주자들의 반 응은 예측할 수 없습니다."라고 말했습니다.

이사벨라는 자신의 입장을 굽히지 않고 "라라, 우리가 모르는 사이에 천상의 쓰레기장에 위협이 도사리고 있을 수 있습니다. 우리는 회수를 진 행해야 합니다."라고 말했습니다.

갈등하는 라라는 마지막으로 "알겠습니다. 조사대를 준비하세요. 그러나 우리는 그곳 거주자들에게 최소한의 교란을 줄 것입니다. 우리의 임무 는 배우고 보호하는 것이지, 이용하는 것이 아닙니다."라고 말했습니다.

며칠 후, 라라는 회수 팀을 이끌고 개조된 셔틀인 스카우트 호에 탑승했습니다. 카이와 함께 그녀는 천상의 쓰레기장으로 향했습니다. 그들이  쓰레기장으로 진입하면서 광경에 압도당했습니다. 우주선과 기술의 거대한 해면은 눈이 닿는 모든 곳으로 뻗어나갔습니다.

카이가 말했다. "대장님, 에너지가 높아지는 것이 감지됩니다. 마치 쓰 레기장이 저희 존재에 반응하는 것 같습니다."

라라는 대답했습니다. "카이, 전방을 주시하세요. 누가 알겠어요, 우주 의 비밀을 풀지도 모르는 일이니까요."

스카우트 호는 쓰레기장을 항해하면서 버려진 우주선의 잔해와 기이한  장치를 발견했습니다. 그들은 거주지에 도달했고, 그곳은 고철과 고철을 엮어 만든 마을이었습니다. 그곳 거주자들은 다채롭고 변종적인 그룹이었고, 고대 우주선의 조각들로 몸을 장식했습니다.

조사대의 수석 언어학자였던 아리아는 통신을 시도하며 "우호적인 의도 로 왔습니다. 교류를 원합니다."라고 말했습니다.

마을에서 나이 많은 인물이 나왔고, 그 인물은 쓰레기장의 복잡한 언어 로 응답했습니다. 카이가 번역하며 "그들은 우리가 왔고 그들을 괴롭히 지 않기를 바라는 이유를 알고 싶어 합니다."라고 말했습니다.

라라는 대답했습니다. "우리는 미지의 기술을 찾고 있습니다. 우리는 배우고 공유하기 위해 여기에 있습니다."

노인은 곰곰이 생각하며 말했습니다. "기술은 저주이자 축복이 될 수 있습니다. 그 지혜를 증명할 수 있는가?"

라라는 의지가 굳은 채로 말했습니다. "우리는 그날에 부응하기 위해 최선을 다할 것입니다."

노인은 라라와 그녀의 팀을 쓰레기장의 심장부로 안내했고, 그곳에서 고대 우주선의 심장이 있는 크고 빛나는 챔버를 발견했습니다. 그곳에서  그들은 기술을 손에 넣었고, 기술은 과거의 문명을 보여주며 그들의 진 보의 위험을 경고했습니다.

그 경험으로 바뀐 라라는 집으로 돌아왔습니다. 그녀는 의회에 천상의  쓰레기장의 회수가 가져올 위험에 대한 우려를 알렸습니다. 천상의 쓰레기장은 손대지 않은 채 보존되어야 하며, 역사를 공부하고 배우기 위해 보존되어야 했습니다. 의회는 라라의 주장에 동의했고, 우주의 알려지지 않은 영역을 보호하기 위해 보호구를 설치했습니다.

라라는 우주에서 일생의 교훈을 얻었고, 미지의 신비에 굴복했습니다.  우주의 심연에서 그녀는 진정으로 진보된 것은 기술이 아니라 우주의 심오한 영역을 존중하면서 연결하고 이해하는 것이라는 것을 깨달았습니다.

상태 변경: {'critic_input': '다음과 같습니다:\n\n라라는 사령실로 돌아와 작전 책임자인 이사벨라를 만났습니다. 이사벨라는 테이블 위에 있는 지도를 가리키며 "라라, 당신의 보고서에 따르면 천상의 쓰레기장에 는 미지의 기술이 있을 수 있습니다. 의회는 우리가 회수 작전을 진행하기를 원합니다."라고 말했습니다.\n\n라라는 신중을 기하며 "이사벨라, 구조 신호를 방해하는 것을 주저합니다. 쓰레기장은 위험할 수 있고, 우리 행동에 대한 그곳 거주자들의 반응은 예측할 수 없습니다."라고 말했습니다.\n\n이사벨라는 자신의 입장을 굽히지 않고 "라라, 우리가 모르 는 사이에 천상의 쓰레기장에 위협이 도사리고 있을 수 있습니다. 우리 는 회수를 진행해야 합니다."라고 말했습니다.\n\n갈등하는 라라는 마지막으로 "알겠습니다. 조사대를 준비하세요. 그러나 우리는 그곳 거주자 들에게 최소한의 교란을 줄 것입니다. 우리의 임무는 배우고 보호하는  것이지, 이용하는 것이 아닙니다."라고 말했습니다.\n\n며칠 후, 라라는 회수 팀을 이끌고 개조된 셔틀인 스카우트 호에 탑승했습니다. 카이와 함께 그녀는 천상의 쓰레기장으로 향했습니다. 그들이 쓰레기장으로 진 입하면서 광경에 압도당했습니다. 우주선과 기술의 거대한 해면은 눈이 닿는 모든 곳으로 뻗어나갔습니다.\n\n카이가 말했다. "대장님, 에너지 가 높아지는 것이 감지됩니다. 마치 쓰레기장이 저희 존재에 반응하는  것 같습니다."\n\n라라는 대답했습니다. "카이, 전방을 주시하세요. 누 가 알겠어요, 우주의 비밀을 풀지도 모르는 일이니까요."\n\n스카우트  호는 쓰레기장을 항해하면서 버려진 우주선의 잔해와 기이한 장치를 발 견했습니다. 그들은 거주지에 도달했고, 그곳은 고철과 고철을 엮어 만 든 마을이었습니다. 그곳 거주자들은 다채롭고 변종적인 그룹이었고, 고대 우주선의 조각들로 몸을 장식했습니다.\n\n조사대의 수석 언어학자였던 아리아는 통신을 시도하며 "우호적인 의도로 왔습니다. 교류를 원합 니다."라고 말했습니다.\n\n마을에서 나이 많은 인물이 나왔고, 그 인물은 쓰레기장의 복잡한 언어로 응답했습니다. 카이가 번역하며 "그들은  우리가 왔고 그들을 괴롭히지 않기를 바라는 이유를 알고 싶어 합니다."라고 말했습니다.\n\n라라는 대답했습니다. "우리는 미지의 기술을 찾고 있습니다. 우리는 배우고 공유하기 위해 여기에 있습니다."\n\n노인은 곰곰이 생각하며 말했습니다. "기술은 저주이자 축복이 될 수 있습니다. 그 지혜를 증명할 수 있는가?"\n\n라라는 의지가 굳은 채로 말했습니다. "우리는 그날에 부응하기 위해 최선을 다할 것입니다."\n\n노인은 라 라와 그녀의 팀을 쓰레기장의 심장부로 안내했고, 그곳에서 고대 우주선의 심장이 있는 크고 빛나는 챔버를 발견했습니다. 그곳에서 그들은 기 술을 손에 넣었고, 기술은 과거의 문명을 보여주며 그들의 진보의 위험 을 경고했습니다.\n\n그 경험으로 바뀐 라라는 집으로 돌아왔습니다. 그녀는 의회에 천상의 쓰레기장의 회수가 가져올 위험에 대한 우려를 알렸습니다. 천상의 쓰레기장은 손대지 않은 채 보존되어야 하며, 역사를 공부하고 배우기 위해 보존되어야 했습니다. 의회는 라라의 주장에 동의했고, 우주의 알려지지 않은 영역을 보호하기 위해 보호구를 설치했습니다.\n\n라라는 우주에서 일생의 교훈을 얻었고, 미지의 신비에 굴복했습니다. 우주의 심연에서 그녀는 진정으로 진보된 것은 기술이 아니라 우주 의 심오한 영역을 존중하면서 연결하고 이해하는 것이라는 것을 깨달았 습니다.'}

*** 최종 응답 ***
```


```
==================================================
에이전트: StoryCritic
==================================================
출력:
승인

*** 최종 응답 ***

==================================================
에이전트: SaveCriticDecision
==================================================
출력:
[SaveCriticDecision]이(가) 저장했습니다. 승인

상태 변경: {'critic_decision': '[SaveCriticDecision]이(가) 저장했습니다. 승인'}

*** 최종 응답 ***

==================================================
에이전트: Router
==================================================
Escalate: False

*** 최종 응답 ***
```
