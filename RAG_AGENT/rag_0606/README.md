# ğŸ” ë¬¸ì„œ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ (RAG ê¸°ë°˜)

## âœ… ì‹¤í–‰ ë‚´ìš© ìš”ì•½

- HTML ë¬¸ì„œë¥¼ ë¶ˆëŸ¬ì™€ ë²¡í„°ë¡œ ì„ë² ë”© í›„ ë²¡í„°ìŠ¤í† ì–´ êµ¬ì¶•
- ë¬¸ì„œë§ˆë‹¤ ë©”íƒ€ë°ì´í„°(`subChapterId`, `theoryId`) ì¶”ê°€
- `queries.yaml` ë‚´ ì¿¼ë¦¬ë¡œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ìˆ˜í–‰
- ê²°ê³¼ëŠ” YAML ë° Markdown í˜•ì‹ìœ¼ë¡œ ì €ì¥

## RAG ì„¸íŒ…
```python
# ì„ë² ë”© ê°ì²´ ì •ì˜
embedding = OpenAIEmbeddings(
    model = "text-embedding-3-small",
    openai_api_key=API_KEY,
)
# Vectorstore
vectorstore = Chroma(
    collection_name="html_docs",
    persist_directory=vectordb_path,
    embedding_function=embedding,
)
# ë¬¸ì„œë¡œë“œ ë° ì„ë² ë”©
for path in tqdm(os.listdir(base_path)):
    html_loader = UnstructuredHTMLLoader(
        file_path=os.path.join(base_path, path),
        mode="single",
    )
    documents = html_loader.load()
    for doc in documents:
        doc.metadata['theoryId'] = path.split('_')[1]
        doc.metadata['subChapterId'] = path.split('_')[0]
    vectorstore.add_documents(documents)

# ê²€ìƒ‰ê¸° ì •ì˜
retriever = vectorstore.as_retriever(
    search_type="similarity",
    search_kwargs={"k": 10}
)
# ê²€ìƒ‰ ì‹¤í–‰
docs = retriever.invoke(query)

# ìƒì„± ëª¨ë¸ ê²°ê³¼
llm = ChatGoogleGenerativeAI(
    model="gemini-2.0-flash",
    temperature=0,
    max_tokens=None,
    timeout=None,
    api_key=GEMINI_API_KEY,
)
for source in sources:
    content = get_target_source(source, max_length=2000)
    contents.append(content)
context = "\n".join([f"{'#'*10}\n{i+1}. {content}" for i, content in enumerate(contents)])
prompt = f"""
You are an expert in the field of computer science. Based on the following context, please answer the question:

Context:
{context}

Question: {query}

Answer:
"""
   print(prompt)

response = llm.invoke(prompt).content.strip()

```

## ğŸ” ì‚¬ìš©í•œ ì§ˆì˜

1. ë…ê¸°ì—´ê³¼ ë¹„ìŠ·í•œ ë§¤ê°œì²´ë¡œ ì¸í•œ ê°ì—¼ë³‘ì€?
2. ë¶ˆëª…ì—´ ì§„ë‹¨ ìˆœì„œë¥¼ ì„¤ëª…í•˜ì‹œì˜¤
3. íŒ¨í˜ˆì¦ì˜ ì •ì˜ì™€ ì¹˜ë£Œ ì ‘ê·¼ë²•ì€?
4. ë°œì—´ì˜ ë³‘íƒœìƒë¦¬ ê³¼ì •ì„ ì„¤ëª…í•˜ì‹œì˜¤
5. ì‹¬ë¶€ì „ìœ¼ë¡œ ì…ì›í•œ í™˜ìì˜ ì´ˆê¸° í‰ê°€ í•­ëª©ì€?
6. ì‹¬ë¶€ì „ìœ¼ë¡œ ì…ì›í•œ í™˜ìì—ê²Œ ì²˜ìŒ ì‹œí–‰í•´ì•¼ í•  ì²˜ì¹˜ëŠ”?

## ğŸ“‹ Retriever ê²°ê³¼ ìš”ì•½
[ê²°ê³¼ í™•ì¸í•˜ê¸°!](./query_log.md)
### ğŸ§ª Query: **ë…ê¸°ì—´ê³¼ ë¹„ìŠ·í•œ ë§¤ê°œì²´ë¡œ ì¸í•œ ê°ì—¼ë³‘ì€?**

| Rank | Source | í‰ê°€ |
|------|--------|------|
| 1 | `1643_3848_ì—¬í–‰ ê´€ë ¨ ë°”ì´ëŸ¬ìŠ¤ ê°ì—¼.html` |  |
| 2 | `2522_5676_Leptospira interrogans.html` |  |
| 3 | `2521_5659_Legionella pneumophila.html` |  |
| 4 | `1637_3860_ê³¨ìˆ˜ì—¼.html` |  |
| 5 | `2747_5639_ì—¼ì¦ì˜ ì–‘ìƒ.html` |  |
| 6 | `2525_5685_Rubella virus.html` |  |
| 7 | `1636_3826_ë°œì—´, ë¶ˆëª…ì—´.html` |  |
| 8 | `1638_3852_Healthcare-associated infections.html` |  |
| 9 | `2525_5689_Norovirus.html` |  |
| 10 | `1639_3828_í”¼ë¶€ì—°ì¡°ì§ ê°ì—¼.html` |  |

### ğŸ§ª Query: **ë¶ˆëª…ì—´ ì§„ë‹¨ ìˆœì„œë¥¼ ì„¤ëª…í•˜ì‹œì˜¤**

| Rank | Source | í‰ê°€ |
|------|--------|------|
| 1 | `1636_3826_ë°œì—´, ë¶ˆëª…ì—´.html` |  |
| 2 | `2417_5489_ê·¼ìœ¡ ìˆ˜ì¶•ì˜ ê¸°ê³„ì  íŠ¹ì„±.html` |  |
| 3 | `1872_4389_ì§„ë‹¨ì„œ.html` |  |
| 4 | `1940_4489_í˜¸í¡ ë³´ì¡° ìš”ë²•.html` |  |
| 5 | `2417_5490_Striated muscleì˜ êµ¬ì¡°ì  íŠ¹ì„± ë° í¥ë¶„ ìˆ˜ì¶• ì—°ê³„ê³¼ì •.html` |  |
| 6 | `1940_5468_ì‹¬í™” 1. ê¸°ê³„í™˜ê¸°.html` |  |
| 7 | `1736_4031_ë‚œì‚°.html` |  |
| 8 | `2488_5583_ì‹¬ì¥ì˜ ì „ê¸°í™œë™.html` |  |
| 9 | `1932_4492_COPDì˜ ê¸‰ì„±ì•…í™”.html` |  |
| 10 | `1836_4280_ì§„ë™ê³¼ ë°©ì‚¬ì„ .html` |  |

### ğŸ§ª Query: **íŒ¨í˜ˆì¦ì˜ ì •ì˜ì™€ ì¹˜ë£Œ ì ‘ê·¼ë²•ì€?**

| Rank | Source | í‰ê°€ |
|------|--------|------|
| 1 | `3442_5477_ê´€ì ˆì—¼ì˜ ê°œìš”.html` |  |
| 2 | `1912_4464_ë¹ˆí˜ˆì˜ ì ‘ê·¼.html` |  |
| 3 | `1669_3904_ê²°ì • ìœ ë°œ ê´€ì ˆì—¼.html` |  |
| 4 | `1654_3887_ë‹¹ë‡¨ì˜ ë§Œì„± í•©ë³‘ì¦.html` |  |
| 5 | `1937_4505_íìƒ‰ì „ì¦.html` |  |
| 6 | `2489_5586_í˜ˆì•¡ì‘ê³ .html` |  |
| 7 | `1909_4454_ì¢…ì–‘ì˜ ì¹˜ë£Œ.html` |  |
| 8 | `1767_4108_ìˆ˜ë¶„ ë° ì „í•´ì§ˆ í‰í˜•.html` |  |
| 9 | `1721_4024_ìê¶ê·¼ì¢….html` |  |
| 10 | `1790_4139_ë§Œì„± Cí˜• ê°„ì—¼.html` |  |

### ğŸ§ª Query: **ë°œì—´ì˜ ë³‘íƒœìƒë¦¬ ê³¼ì •ì„ ì„¤ëª…í•˜ì‹œì˜¤**

| Rank | Source | í‰ê°€ |
|------|--------|------|
| 1 | `1754_4059_ê°€ì™€ì‚¬í‚¤ë³‘.html` |  |
| 2 | `1740_4032_ë‹¤íƒœì„ì‹ .html` |  |
| 3 | `1910_4455_ì‹ ìƒë¬¼ë”¸ë¦¼ì¦í›„êµ°.html` |  |
| 4 | `1910_4458_ì¢…ì–‘ìš©í•´ì¦í›„êµ°.html` |  |
| 5 | `1752_4094_ì²­ìƒ‰ì¦ ì„ ì²œ ì‹¬ì§ˆí™˜.html` |  |
| 6 | `1748_4048_ê¸°íƒ€ ë‚´Â·ì™¸ê³¼ì  í•©ë³‘ì¦.html` |  |
| 7 | `1923_4460_ë‹¤ë°œê³¨ìˆ˜ì¢… ë° ê¸°íƒ€ í˜ˆì•¡ì•”.html` |  |
| 8 | `1734_4038_ê¸°í˜•í•™.html` |  |
| 9 | `1636_3826_ë°œì—´, ë¶ˆëª…ì—´.html` |  |
| 10 | `2745_5655_ì„ì‹ ì˜ì–‘ë§‰ë³‘.html` |  |

### ğŸ§ª Query: **ì‹¬ë¶€ì „ìœ¼ë¡œ ì…ì›í•œ í™˜ìì˜ ì´ˆê¸° í‰ê°€ í•­ëª©ì€?**

| Rank | Source | í‰ê°€ |
|------|--------|------|
| 1 | `1800_4195_ì‹¬ë¶€ì „ ì›ì¸, ì¦ìƒ, ì§„ë‹¨.html` |  |
| 2 | `1888_4435_ì •ì‹ ê³¼ì  í‰ê°€.html` |  |
| 3 | `1696_3954_ì™¸ìƒì˜ ì‘ê¸‰ì²˜ì¹˜.html` |  |
| 4 | `1800_4194_ì‹¬ë¶€ì „ ê°œìš”.html` |  |
| 5 | `1797_4199_ì‹¬í˜ˆê´€ê³„ ê²€ì‚¬.html` |  |
| 6 | `1652_3896_ë¶€ì‹  ìš°ì—°ì¢….html` |  |
| 7 | `1843_4276_ì˜ë£Œì˜ ì§ˆ.html` |  |
| 8 | `1800_4196_ì‹¬ë¶€ì „ ì¹˜ë£Œ.html` |  |
| 9 | `1862_4330_ì„ íƒì  ìˆ˜ìˆ ì— ëŒ€í•œ ë°˜ì‘.html` |  |
| 10 | `1843_4275_ë³‘ì›ê´€ë¦¬.html` |  |

### ğŸ§ª Query: **ì‹¬ë¶€ì „ìœ¼ë¡œ ì…ì›í•œ í™˜ìì—ê²Œ ì²˜ìŒ ì‹œí–‰í•´ì•¼ í•  ì²˜ì¹˜ëŠ”?**

| Rank | Source | í‰ê°€ |
|------|--------|------|
| 1 | `2440_4450_ì§€ì—­ì‚¬íšŒì •ì‹ ì˜í•™.html` |  |
| 2 | `1868_4327_ë±€ë¬¼ë¦¼ê³¼ ë™ë¬¼ë¬¼ë¦¼.html` |  |
| 3 | `1864_4329_ìˆ˜ìˆ  ì „ ì²˜ì¹˜.html` |  |
| 4 | `1813_4219_ë§Œì„± ì‹ ë¶€ì „ì˜ ì¹˜ë£Œ.html` |  |
| 5 | `1800_4195_ì‹¬ë¶€ì „ ì›ì¸, ì¦ìƒ, ì§„ë‹¨.html` |  |
| 6 | `1882_4401_í—Œí˜ˆì ê´€ë¦¬.html` |  |
| 7 | `1696_3952_ì‹¬íì†Œìƒìˆ .html` |  |
| 8 | `1872_4390_ì²˜ë°©ì „.html` |  |
| 9 | `1652_3896_ë¶€ì‹  ìš°ì—°ì¢….html` |  |
| 10 | `1638_3852_Healthcare-associated infections.html` |  |


## ğŸ“‹ Generator ê²°ê³¼
[ê²°ê³¼ í™•ì¸í•˜ê¸°!](./query_log_llm.md)
